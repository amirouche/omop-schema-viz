{"version":3,"sources":["serviceWorker.js","ff.js","index.js"],"names":["Boolean","window","location","hostname","match","pk","args","Array","prototype","slice","call","arguments","length","Router","this","routes","route","undefined","pattern","init","view","startsWith","Error","endsWith","push","app","model","path","document","pathname","split","index","params","transformer","_","msg","component","linkClicked","href","event","a","preventDefault","history","pushState","router","resolve","scrollTo","redirect","scrollup","clean","newModel","Immutable","Object","keys","filter","x","forEach","key","set","routeClean","Title","props","title","React","Component","Input","state","value","nextProps","setState","persist","target","onChange","bind","LogoutClicked","localStorage","removeItem","Link","mc","children","className","onClick","Logout","id","createApp","change","root","render","makeController","controller","then","html","ReactDOM","createSimpleApp","getElementById","onpopstate","get","token","request","Request","headers","fetch","getToken","getItem","setToken","setItem","post","data","method","body","JSON","stringify","name","ff","homeInit","response","text","parser","DOMParser","schema","parseFromString","query","hits","element","getAttribute","includes","onSubmit","elements","result","evaluate","XPathResult","ANY_TYPE","iterateNext","onQueryChange","Hit","badge","tagName","Badge","variant","referenceInit","Header","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","Nav","Column","column","remarks","maybeIndex","maybePkIndex","source","IndexColumn","ascending","Index","unique","columns","querySelectorAll","Card","Body","map","Table","table","indices","Container","fluid","Row","Col","append","Form","Group","Label","Control","type","placeholder","Text","Button","tables","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.f251fdf2.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/* MIT License\n *\n * Copyright (c) 2019-2020 Amirouche <amirouche.boubekki@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Immutable from 'seamless-immutable';\n\n\n/**\n * Neat debug function\n */\nlet pk = function() {\n    let args = Array.prototype.slice.call(arguments);\n    if (process.env.NODE_ENV !== 'production') {\n        console.log.apply(console, args);\n    }\n    return args[args.length - 1];\n}\n\n/**\n * Create base app environment\n *\n * This is useful in context where you do not plan to have\n * a router or websockets\n *\n * @param {app} can be any JavaScript Object it's passed around\n *              the environment. Things that can not be serialized.\n *              It's not required to be immutable.\n * @param {root} is DOM node that is used to render the graphical\n *               part of the application\n * @param {init} is function that must return the seed model.\n *               It usually return an immutable object.\n * @param {view} is a function that takes as argument `app` and\n *               the current `model` and `makeController` usually\n *               simply called `mc`.\n * @returns {Function} called `change` that allows to sneak into\n *                     the application environment from the outside.\n *                     It's useful to extend the behavior of forward.\n */\nlet createSimpleApp = function(app, root, init, view) {\n    let model = init();\n\n    // TODO: bring back spawn function\n\n    let render;\n\n    /* wraps event handlers to create controllers.\n\n       The returned function will use the function returned\n       by the controller to update the model and trigger a render\n       if needed.\n     */\n    let makeController = function(controller) {\n        return function(event) {\n            let promise = controller(app, model, event);\n            promise.then(function(transformer) {\n                // XXX: if the controller returns nothing\n                // this will lead to an 'undefined' error\n                // which is not very friendly.\n                let newModel = transformer();\n                model = newModel;  // XXX: side effect\n                render();\n            });\n        }\n    };\n\n    /* Render the application */\n    render = function() {\n        let html = view(model, makeController);\n        ReactDOM.render(html, root);\n    };\n\n    // sneak into an application from the outside.\n    return function(change) {\n        let promise = change(app, model);\n        promise.then(function(transformer) {\n            if(transformer) {\n                let newModel = transformer();\n                model = newModel;  // XXX: side effect\n                render();\n            }\n        });\n    };\n};\n\n/* URL Router */\n\nlet Router = class {\n    constructor() {\n        this.routes = [];\n        this.route = undefined;\n    }\n\n    append(pattern, init, view) {\n        if(!pattern.startsWith('/')) {\n            throw new Error(\"Pattern must start with a /\");\n        }\n        if(!pattern.endsWith('/')) {\n            throw new Error(\"Pattern must end with a /\");\n        }\n\n        this.routes.push({pattern: pattern, init:init, view: view});\n    }\n\n    async resolve(app, model) {\n        pk('resolving route...');\n        let path = document.location.pathname.split('/');\n        let match, params;\n\n        for(let index=0; index<this.routes.length; index++) {\n            let route = this.routes[index];\n            [match, params] = this.match(route, path);\n\n            if (match) {\n                this.route = route;\n                pk('router matched route', route)\n                let transformer = await route.init(app, model, params);\n                // eslint-disable-next-line\n                return _ => transformer();\n            }\n        }\n\n        // FIXME: replace with 404 error page\n        let msg = 'no matching route found!';\n        pk(msg);\n        // silenced by reactjs?!\n        throw new Error(msg);\n    }\n\n    match(route, path) {\n        // FIXME: do that at init time\n        let pattern = route.pattern.split(\"/\");\n\n        // fast path: if pattern and path are not the same length\n        // they can not match\n        if (pattern.length !== path.length) {\n            return [false, {}];\n        }\n\n        // try to match\n        let params = {};\n        for (var index=0; index < pattern.length; index++) {\n            let component = pattern[index];\n            if (component.startsWith('{') && component.endsWith('}')) {\n                params[component.slice(1, -1)] = path[index];\n            } else if (component !== path[index]) {\n                return [false, {}]\n            } else {\n                continue;\n            }\n        }\n\n        return [true, params];\n    }\n}\n\n/**\n * Create the app, run the app and return a function that allows\n * to sneak into it. The application will mounted on an html\n * element which has \"root\" as id. The initial model will be\n * an Immutable JS Object.\n *\n * @param {router} a Router instance.\n * @returns {Function} a function that allows to sneak into the app closure\n *          from the outside world.\n */\nlet createApp = function(router) {\n    let app = {router: router};\n\n    // prepare createSimpleApp arguments\n    let root = document.getElementById(\"root\");\n    let init = function() { return Immutable({}); };\n    let view = function(model, mc) {\n        return router.route.view(model, mc);\n    };\n\n    let change = createSimpleApp(app, root, init, view);\n\n    window.onpopstate = function(event) {\n        return change(router.resolve.bind(router));\n    };\n\n    pk('initial rendering');\n    change(router.resolve.bind(router));\n\n    return change;\n}\n\nlet linkClicked = function(href) {\n    return function(app, model) {\n        return async function(event) {\n            event.preventDefault();\n            window.history.pushState({}, \"\", href);\n            let transformer = app.router.resolve(app, model);\n            window.scrollTo(0, 0);\n            return transformer;\n        }\n    }\n}\n\nlet redirect = async function(app, model, href, scrollup) {\n    pk('redirecting...', app, model, href);\n    window.history.pushState({}, \"\", href);\n    let transformer = await app.router.resolve(app, model);\n    if (scrollup || scrollup === undefined) {\n        window.scrollTo(0, 0);\n    }\n    return transformer;\n}\n\nlet Link = function({mc, href, children, className}) {\n    return <a href={href} onClick={mc(linkClicked(href))} className={className}>{children}</a>;\n}\n\nlet clean = function(model) {\n    let newModel = Immutable({});\n    // only keep things that start with %\n    Object.keys(model)\n          .filter((x) => x.startsWith('%'))\n          .forEach(function(key) {\n              newModel = newModel.set(key, model[key]);  // XXX: side-effect\n          });\n    return newModel;\n}\n\n\nlet routeClean = async function(app, model) {\n    return (app, model) => clean(model);\n}\n\nlet set = function(name) {\n    return function(app, model) {\n        return async function (event) {\n            let value = event.target.value;\n            return (app, model) => model.set(name, value);\n        }\n    }\n}\n\nclass Title extends React.Component {\n    constructor(props) {\n        super(props);\n        this.title = props.title;\n    }\n\n    componentDidMount() {\n        document.title = this.props.title;\n    }\n\n    componentDidUpdate() {\n        document.title = this.props.title;\n    }\n\n    render() {\n        // FIXME: with react 16 is not required to return something\n        return <div/>;\n    }\n}\n\n\n// ref: https://github.com/facebook/react/issues/955\nclass Input extends React.Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n        this.state = { value: props.value || \"\" };\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.state.value !== nextProps.value) {\n            this.setState({ value: nextProps.value });\n        }\n    }\n\n    onChange(event) {\n        event.persist();\n        // TODO: do something else when this.props.onChange is not set\n        this.setState({ value: event.target.value }, () => this.props.onChange(event));\n    }\n\n    render() {\n        return (<input {...this.props} {...this.state} onChange={this.onChange.bind(this)} />);\n    }\n}\n\n\nlet get = function(path, token) {\n    let request = new Request(path);\n    if (token) {\n        request.headers.set('X-AUTH-TOKEN', token)\n    }\n    return fetch(request);\n}\n\nlet post = function(path, data, token) {\n    let request = new Request(path, {method: 'POST', body: JSON.stringify(data)});\n    if (token) {\n        request.headers.set('X-AUTH-TOKEN', token);\n    }\n    return fetch(request);\n}\n\n/**\n *  Get the auth token from the model or localStorage\n */\nlet getToken = function(model) {\n    return model['%token'] || window.localStorage.getItem('%token');\n}\n\nlet setToken = function(token) {\n    window.localStorage.setItem('%token', token);\n}\n\nlet LogoutClicked = function(app, model) {\n    return async function(event) {\n        window.localStorage.removeItem('%token');\n        return await redirect(app, model, '/');\n    }\n}\n\nlet Logout = function({mc}) {\n    return <span id=\"logout\" onClick={mc(LogoutClicked)}>Logout</span>;\n}\n\nexport default {\n    Immutable,\n    Link,\n    Logout,\n    Router,\n    Title,\n    clean,\n    createApp,\n    get,\n    getToken,\n    setToken,\n    pk,\n    post,\n    redirect,\n    set,\n    routeClean,\n    Input,\n};\n","import React from 'react';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Badge, Card, Container, Row, Col, Navbar, Nav, Form, Button} from 'react-bootstrap';\nimport ff from './ff.js';\nimport ReactMarkdown from 'react-markdown';\n\n\nlet router = new ff.Router()\n\n// home\n\nlet homeInit = async function() {\n    let response = await ff.get(\"/schema.xml\");\n    let text = await response.text()\n    let parser = new DOMParser();\n    let schema = parser.parseFromString(text, \"application/xml\");\n\n    let newModel = {schema: schema, query: \"\", hits: []};\n\n    return () => newModel;\n}\n\n\nlet match = function(element, query) {\n    let remarks = element.getAttribute('remarks');\n    return remarks.includes(query);\n}\n\nlet onSubmit = async function(app, model, event) {\n    event.preventDefault();\n    let schema = model.schema;\n    let query = model.query;\n    let element;\n    let elements = [];\n\n    let result = schema.evaluate( '//table', schema, null, XPathResult.ANY_TYPE, null);\n    while(element = result.iterateNext()) {\n        elements.push(element);\n    }\n\n    result = schema.evaluate( '//table/column', schema, null, XPathResult.ANY_TYPE, null);\n    while(element = result.iterateNext()) {\n        elements.push(element);\n    }\n\n    let hits = elements.filter(element => match(element, query));\n\n    model.hits = hits;\n\n    return () => model;\n}\n\nlet onQueryChange = async function(app, model, event) {\n    model.query = event.target.value;\n    return () => model;\n}\n\nlet Hit = function({element}) {\n    let badge;\n    if(element.tagName === \"table\") {\n        badge = <Badge variant=\"primary\">Table</Badge>;\n    } else if (element.tagName === \"column\") {\n        badge = <Badge variant=\"secondary\">Column</Badge>;\n    }\n\n    let name = element.getAttribute('name');\n\n    return (\n        <div>{badge} <a href={\"/reference/#\" + name}>{name}</a> <small className=\"text-muted\">{element.getAttribute(\"remarks\")}</small></div>\n    )\n}\n\nlet homeView = function(model, mc) {\n    let query = model.query;\n    let hits = model.hits.map(element => <Hit element={element}/>);\n\n    return (\n        <>\n            <Header/>\n            <Container>\n                <Row>\n                    <Col>\n                        <Form onSubmit={mc(onSubmit)}>\n                            <Form.Group>\n                                <Form.Label>Recherche</Form.Label>\n                                <Form.Control type=\"text\"\n                                              placeholder=\"filtre\"\n                                              value={query}\n                                              onChange={mc(onQueryChange)}\n                                />\n                                <Form.Text className=\"text-muted\">\n                                    Filtrer les tables ou colonnes.\n                                </Form.Text>\n                            </Form.Group>\n\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>\n                        </Form>\n                    </Col>\n                </Row>\n                {hits}\n            </Container>\n        </>\n    );\n}\n\n// reference\n\nlet referenceInit = async function() {\n    let response = await ff.get(\"/schema.xml\");\n    let text = await response.text()\n    let parser = new DOMParser();\n    let schema = parser.parseFromString(text, \"application/xml\");\n\n    let newModel = {schema: schema};\n\n    return (app, model) => newModel;\n}\n\nlet Header = function() {\n    return (\n        <Navbar bg=\"light\" expand=\"lg\">\n            <Navbar.Brand href=\"/\">omop-schema-viz</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                    <Nav.Link href=\"/\">Home</Nav.Link>\n                    <Nav.Link href=\"/reference/\">Reference</Nav.Link>\n                    <Nav.Link href=\"/graph/\">Graph</Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    )\n}\n\n\nlet maybePkIndex = function(pk, name) {\n    for (let element of pk) {\n        if (element.getAttribute('column') === name) {\n            return element.getAttribute('sequenceNumberInPK');\n        }\n    }\n    return false;\n}\n\n\nlet Column = function({column, pk}) {\n    let name = column.getAttribute('name');\n    let remarks = column.getAttribute('remarks');\n    let maybeIndex = maybePkIndex(pk, name);\n\n    if (maybeIndex) {\n        pk = <Badge variant=\"info\" title=\"sequence number in primary key\">{ maybeIndex }</Badge>\n    } else {\n        pk = \"\";\n    }\n\n    return (\n        <div>\n            <h3 id={name}><Badge variant=\"secondary\">Column</Badge> {pk} {name}</h3>\n            <ReactMarkdown source={remarks} />\n        </div>\n    );\n}\n\n\nlet IndexColumn = function({column}) {\n    let name = column.getAttribute('name');\n    let ascending;\n\n    if (column.getAttribute('ascending') === \"true\") {\n        ascending = <Badge variant=\"success\">ascending</Badge>;\n    } else {\n        ascending = <Badge variant=\"danger\">descending</Badge>;\n    }\n\n    return <li>{name} {ascending}</li>\n}\n\n\nlet Index = function({index}) {\n    let name = index.getAttribute('name');\n    let unique;\n    if (index.getAttribute('unique') === \"true\") {\n        unique = <Badge variant=\"warning\">unique</Badge>;\n    } else {\n        unique = \"\";\n    }\n\n    let columns = Array.prototype.slice.call(index.querySelectorAll(':scope > column'));\n\n    return (\n        <Card>\n            <Card.Body>\n                <div>\n                    <h4><Badge variant=\"success\">Index</Badge> {unique} {name}</h4>\n                    <ul>\n                        {columns.map(column => <IndexColumn key={column.getAttribute(\"name\")}\n                                                            column={column} />)}\n                    </ul>\n                </div>\n            </Card.Body>\n        </Card>\n    );\n}\n\n\n\n\nlet Table = function({table}) {\n    let name = table.getAttribute('name');\n    let remarks = table.getAttribute('remarks');\n    let columns = Array.prototype.slice.call(table.querySelectorAll(':scope > column'));\n    let indices = Array.prototype.slice.call(table.querySelectorAll(':scope > index'));\n    let pk = Array.prototype.slice.call(table.querySelectorAll(':scope > primaryKey'));\n\n    return (\n        <Container fluid=\"md\">\n            <Row>\n                <Col>\n                    <Card>\n                        <Card.Body>\n                            <h2 id={name}><Badge variant=\"primary\">Table</Badge> {name}</h2>\n                            <ReactMarkdown source={remarks} />\n                            {columns.map(column => <Column key={column.getAttribute(\"name\")}\n                                                           column={column} pk={pk} />)}\n                            {indices.map(index => <Index key={index.getAttribute(\"name\")} index={index} />)}\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\n\nlet referenceView = function(model, mc) {\n    let schema = model.schema;\n    let result = schema.evaluate( '//table', schema, null, XPathResult.ANY_TYPE, null);\n    let tables = [];\n    let table;\n\n    while(table = result.iterateNext()) {\n        tables.push(table);\n    }\n\n    ff.pk('tables', tables);\n\n\n    return (\n        <>\n            <Header/>\n            {tables.map(table => <Table key={table.getAttribute('name')}\n                                        table={table}></Table>)}\n        </>\n    )\n}\n\nrouter.append('/', homeInit, homeView)\nrouter.append('/reference/', referenceInit, referenceView)\n\nff.createApp(router);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}