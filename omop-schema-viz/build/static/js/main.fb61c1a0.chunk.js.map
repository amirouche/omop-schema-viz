{"version":3,"sources":["serviceWorker.js","ff.js","index.js"],"names":["Boolean","window","location","hostname","match","pk","args","Array","prototype","slice","call","arguments","length","Router","this","routes","route","undefined","pattern","init","view","startsWith","Error","endsWith","push","app","model","path","document","pathname","split","index","params","transformer","_","msg","component","linkClicked","href","event","a","preventDefault","history","pushState","router","resolve","scrollTo","redirect","scrollup","clean","newModel","Immutable","Object","keys","filter","x","forEach","key","set","routeClean","Title","props","title","React","Component","Input","state","value","nextProps","setState","persist","target","onChange","bind","LogoutClicked","localStorage","removeItem","Link","mc","children","className","onClick","Logout","id","createApp","change","root","render","makeController","controller","then","html","ReactDOM","hash","querySelector","scrollIntoView","createSimpleApp","getElementById","onpopstate","get","token","request","Request","headers","fetch","getToken","getItem","setToken","setItem","post","data","method","body","JSON","stringify","name","ff","linkReference","reference","$ref","elementToKey","element","tagName","getAttribute","table","parentElement","column","myConfig","nodeHighlightBehavior","node","color","size","highlightStrokeColor","link","highlightColor","height","width","onClickGraphNode","schema","xpath","result","evaluate","XPathResult","ANY_TYPE","iterateNext","graphInit","param","response","text","parser","DOMParser","parseFromString","append","hit","nodes","links","columns","querySelectorAll","symbolType","source","Container","fluid","Row","Col","config","onClickNode","homeInit","URLSearchParams","search","query","hits","elements","terms","toLowerCase","replace","e","trim","normalize","found","word","term","onSubmit","onQueryChange","Hit","badge","Badge","variant","map","Form","Group","Label","Control","type","placeholder","Text","Button","referenceInit","Header","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","Nav","Column","remarks","maybeIndex","maybePkIndex","renderers","IndexColumn","ascending","Index","unique","Card","Body","Table","indices","tables","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.fb61c1a0.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","/* MIT License\n *\n * Copyright (c) 2019-2020 Amirouche <amirouche.boubekki@gmail.com>\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Immutable from 'seamless-immutable';\n\n\n/**\n * Neat debug function\n */\nlet pk = function() {\n    let args = Array.prototype.slice.call(arguments);\n    if (process.env.NODE_ENV !== 'production') {\n        console.log.apply(console, args);\n    }\n    return args[args.length - 1];\n}\n\n/**\n * Create base app environment\n *\n * This is useful in context where you do not plan to have\n * a router or websockets\n *\n * @param {app} can be any JavaScript Object it's passed around\n *              the environment. Things that can not be serialized.\n *              It's not required to be immutable.\n * @param {root} is DOM node that is used to render the graphical\n *               part of the application\n * @param {init} is function that must return the seed model.\n *               It usually return an immutable object.\n * @param {view} is a function that takes as argument `app` and\n *               the current `model` and `makeController` usually\n *               simply called `mc`.\n * @returns {Function} called `change` that allows to sneak into\n *                     the application environment from the outside.\n *                     It's useful to extend the behavior of forward.\n */\nlet createSimpleApp = function(app, root, init, view) {\n    let model = init();\n\n    // TODO: bring back spawn function\n\n    let render;\n\n    /* wraps event handlers to create controllers.\n\n       The returned function will use the function returned\n       by the controller to update the model and trigger a render\n       if needed.\n     */\n    let makeController = function(controller) {\n        return function(event) {\n            // https://fb.me/react-event-pooling\n            event.persist()\n            let promise = controller(app, model, event);\n            promise.then(function(transformer) {\n                // XXX: if the controller returns nothing\n                // this will lead to an 'undefined' error\n                // which is not very friendly.\n                let newModel = transformer();\n                model = newModel;  // XXX: side effect\n                render();\n            });\n        }\n    };\n\n    /* Render the application */\n    render = function() {\n        let html = view(model, makeController);\n        ReactDOM.render(html, root);\n        if (document.location.hash !== '') {\n            // XXX: quick fix to make http://foobar/#hash work\n            // it might not always be what we want.\n            let target = document.querySelector(document.location.hash);\n            target.scrollIntoView();\n        }\n    };\n\n    // sneak into an application from the outside.\n    return function(change) {\n        let promise = change(app, model);\n        promise.then(function(transformer) {\n            if(transformer) {\n                let newModel = transformer();\n                model = newModel;  // XXX: side effect\n                render();\n            }\n        });\n    };\n};\n\n/* URL Router */\n\nlet Router = class {\n    constructor() {\n        this.routes = [];\n        this.route = undefined;\n    }\n\n    append(pattern, init, view) {\n        if(!pattern.startsWith('/')) {\n            throw new Error(\"Pattern must start with a /\");\n        }\n        if(!pattern.endsWith('/')) {\n            throw new Error(\"Pattern must end with a /\");\n        }\n\n        this.routes.push({pattern: pattern, init:init, view: view});\n    }\n\n    async resolve(app, model) {\n        pk('resolving route...');\n        let path = document.location.pathname.split('/');\n        let match, params;\n\n        for(let index=0; index<this.routes.length; index++) {\n            let route = this.routes[index];\n            [match, params] = this.match(route, path);\n\n            if (match) {\n                this.route = route;\n                pk('router matched route', route)\n                let transformer = await route.init(app, model, params);\n                // eslint-disable-next-line\n                return _ => transformer();\n            }\n        }\n\n        // FIXME: replace with 404 error page\n        let msg = 'no matching route found!';\n        pk(msg);\n        // silenced by reactjs?!\n        throw new Error(msg);\n    }\n\n    match(route, path) {\n        // FIXME: do that at init time\n        let pattern = route.pattern.split(\"/\");\n\n        // fast path: if pattern and path are not the same length\n        // they can not match\n        if (pattern.length !== path.length) {\n            return [false, {}];\n        }\n\n        // try to match\n        let params = {};\n        for (var index=0; index < pattern.length; index++) {\n            let component = pattern[index];\n            if (component.startsWith('{') && component.endsWith('}')) {\n                params[component.slice(1, -1)] = path[index];\n            } else if (component !== path[index]) {\n                return [false, {}]\n            } else {\n                continue;\n            }\n        }\n\n        return [true, params];\n    }\n}\n\n/**\n * Create the app, run the app and return a function that allows\n * to sneak into it. The application will mounted on an html\n * element which has \"root\" as id. The initial model will be\n * an Immutable JS Object.\n *\n * @param {router} a Router instance.\n * @returns {Function} a function that allows to sneak into the app closure\n *          from the outside world.\n */\nlet createApp = function(router) {\n    let app = {router: router};\n\n    // prepare createSimpleApp arguments\n    let root = document.getElementById(\"root\");\n    let init = function() { return Immutable({}); };\n    let view = function(model, mc) {\n        return router.route.view(model, mc);\n    };\n\n    let change = createSimpleApp(app, root, init, view);\n\n    window.onpopstate = function(event) {\n        return change(router.resolve.bind(router));\n    };\n\n    pk('initial rendering');\n    change(router.resolve.bind(router));\n\n    return change;\n}\n\nlet linkClicked = function(href) {\n    return function(app, model) {\n        return async function(event) {\n            event.preventDefault();\n            window.history.pushState({}, \"\", href);\n            let transformer = app.router.resolve(app, model);\n            window.scrollTo(0, 0);\n            return transformer;\n        }\n    }\n}\n\nlet redirect = async function(app, model, href, scrollup) {\n    pk('redirecting...', app, model, href);\n    window.history.pushState({}, \"\", href);\n    let transformer = await app.router.resolve(app, model);\n    if (scrollup || scrollup === undefined) {\n        window.scrollTo(0, 0);\n    }\n    return transformer;\n}\n\nlet Link = function({mc, href, children, className}) {\n    return <a href={href} onClick={mc(linkClicked(href))} className={className}>{children}</a>;\n}\n\nlet clean = function(model) {\n    let newModel = Immutable({});\n    // only keep things that start with %\n    Object.keys(model)\n          .filter((x) => x.startsWith('%'))\n          .forEach(function(key) {\n              newModel = newModel.set(key, model[key]);  // XXX: side-effect\n          });\n    return newModel;\n}\n\n\nlet routeClean = async function(app, model) {\n    return (app, model) => clean(model);\n}\n\nlet set = function(name) {\n    return function(app, model) {\n        return async function (event) {\n            let value = event.target.value;\n            return (app, model) => model.set(name, value);\n        }\n    }\n}\n\nclass Title extends React.Component {\n    constructor(props) {\n        super(props);\n        this.title = props.title;\n    }\n\n    componentDidMount() {\n        document.title = this.props.title;\n    }\n\n    componentDidUpdate() {\n        document.title = this.props.title;\n    }\n\n    render() {\n        // FIXME: with react 16 is not required to return something\n        return <div/>;\n    }\n}\n\n\n// ref: https://github.com/facebook/react/issues/955\nclass Input extends React.Component {\n    constructor(props, ...args) {\n        super(props, ...args);\n        this.state = { value: props.value || \"\" };\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (this.state.value !== nextProps.value) {\n            this.setState({ value: nextProps.value });\n        }\n    }\n\n    onChange(event) {\n        event.persist();\n        // TODO: do something else when this.props.onChange is not set\n        this.setState({ value: event.target.value }, () => this.props.onChange(event));\n    }\n\n    render() {\n        return (<input {...this.props} {...this.state} onChange={this.onChange.bind(this)} />);\n    }\n}\n\n\nlet get = function(path, token) {\n    let request = new Request(path);\n    if (token) {\n        request.headers.set('X-AUTH-TOKEN', token)\n    }\n    return fetch(request);\n}\n\nlet post = function(path, data, token) {\n    let request = new Request(path, {method: 'POST', body: JSON.stringify(data)});\n    if (token) {\n        request.headers.set('X-AUTH-TOKEN', token);\n    }\n    return fetch(request);\n}\n\n/**\n *  Get the auth token from the model or localStorage\n */\nlet getToken = function(model) {\n    return model['%token'] || window.localStorage.getItem('%token');\n}\n\nlet setToken = function(token) {\n    window.localStorage.setItem('%token', token);\n}\n\nlet LogoutClicked = function(app, model) {\n    return async function(event) {\n        window.localStorage.removeItem('%token');\n        return await redirect(app, model, '/');\n    }\n}\n\nlet Logout = function({mc}) {\n    return <span id=\"logout\" onClick={mc(LogoutClicked)}>Logout</span>;\n}\n\nexport default {\n    Immutable,\n    Link,\n    Logout,\n    Router,\n    Title,\n    clean,\n    createApp,\n    get,\n    getToken,\n    setToken,\n    pk,\n    post,\n    redirect,\n    set,\n    routeClean,\n    Input,\n};\n","import React from 'react';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Badge, Card, Container, Row, Col, Navbar, Nav, Form, Button} from 'react-bootstrap';\nimport ff from './ff.js';\nimport ReactMarkdown from 'react-markdown';\nimport { Graph } from 'react-d3-graph';\n\n\nlet router = new ff.Router()\n\n// helpers\n\nlet linkReference = function (reference) {\n    // XXX: workaround mishandling of [foobar] in ReactMarkdown\n    // https://github.com/rexxars/react-markdown/issues/115#issuecomment-357953459\n    if (!reference.href) {\n        return `[ ${reference.children[0].props.value} ]`;\n    }\n\n    return <a href={reference.$ref}>{reference.children}</a>\n}\n\nlet elementToKey = function(element) {\n    if (element.tagName === \"Table\") {\n        return element.getAttribute(\"name\");\n    } else {\n        let table = element.parentElement.getAttribute(\"name\");\n        let column = element.getAttribute(\"name\");\n        return table + \"#\" + element.tagName + \"#\" + column;\n    }\n}\n\n// graph\n\n// the graph configuration, you only need to pass down properties\n// that you want to override, otherwise default ones will be used\nlet myConfig = {\n    nodeHighlightBehavior: true,\n    node: {\n        color: 'lightgreen',\n        size: 120,\n        highlightStrokeColor: 'blue'\n    },\n    link: {\n        highlightColor: 'lightblue'\n    },\n    height: 768,\n    width: 1024\n};\n\nlet onClickGraphNode = async function(app, model, event) {\n\n    let schema = model.schema;\n    let xpath = `//*[@name=\"${event}\"]`;\n\n    let result = schema.evaluate(xpath, schema, null, XPathResult.ANY_TYPE, null);\n\n    let element = result.iterateNext();\n\n    model = {schema:schema, element: element};\n\n    return () => model;\n};\n\nlet graphInit = async function(app, model, param) {\n    let response = await ff.get(\"/schema.xml\");\n    let text = await response.text()\n    let parser = new DOMParser();\n    let schema = parser.parseFromString(text, \"application/xml\");\n\n    let newModel = {schema: schema, element: undefined};\n\n    return () => newModel;\n}\n\nlet graphView = function(model, mc) {\n    let schema = model.schema;\n    let element = model.element;\n    let data = {nodes: [], links: []};\n\n    let table;\n    let result = schema.evaluate( '//table', schema, null, XPathResult.ANY_TYPE, null);\n    while(table = result.iterateNext()) {\n        let columns = table.querySelectorAll(':scope > column');\n        table = table.getAttribute(\"name\");\n        data.nodes.push({id: table, symbolType: \"diamond\", size: 150, color: \"red\"});\n\n        for (let column of columns) {\n            column = column.getAttribute(\"name\");\n            data.nodes.push({id: column});\n            data.links.push({source: table, target: column});\n        }\n    }\n\n    let hit;\n    if (element !== undefined) {\n        hit = <Hit element={element} mc={mc} />;\n    } else {\n        hit = <p>Select a node</p>;\n    }\n\n    return (\n        <>\n            <Header />\n            <Container fluid>\n                <Row>\n                    <Col>\n                        <Graph id=\"graph-id\"\n                               data={data}\n                               config={myConfig}\n                               onClickNode={mc(onClickGraphNode)}\n                        />\n                    </Col>\n                    <Col>\n                        { hit }\n                    </Col>\n                </Row>\n            </Container>\n        </>\n\n    );\n};\n\nrouter.append('/graph/', graphInit, graphView)\n\n// home\n\nlet homeInit = async function() {\n    let response = await ff.get(\"/schema.xml\");\n    let text = await response.text()\n    let parser = new DOMParser();\n    let schema = parser.parseFromString(text, \"application/xml\");\n\n    const params = new URLSearchParams(window.location.search);\n    const query = params.get('q') || \"\";\n\n    let hits = [];\n    if (query !== \"\") {\n        let element;\n        let elements = [];\n\n        let result = schema.evaluate( '//table', schema, null, XPathResult.ANY_TYPE, null);\n        while(element = result.iterateNext()) {\n            elements.push(element);\n        }\n\n        result = schema.evaluate( '//table/column', schema, null, XPathResult.ANY_TYPE, null);\n        while(element = result.iterateNext()) {\n            elements.push(element);\n        }\n\n        hits = elements.filter(element => match(element, query));\n    }\n\n    let newModel = {schema: schema, query: query, hits: hits};\n\n    return () => newModel;\n}\n\n\nlet match = function(element, query) {\n    // prepare query\n    let terms = query.toLowerCase()\n                     .replace(\"+\", \" \")\n                     .split(/(\\s+)/)\n                     .filter( function(e) { return e.trim().length > 0; } );\n    // prepare \"index\"\n    let remarks = element.getAttribute('remarks');\n    let name = element.getAttribute('name');\n    let index = remarks + ' ' + name;\n    index = index.toLowerCase().normalize(\"NFD\").replace(/[\\u0300-\\u036f]/g, \"\");\n    index = index.replace(/[.,\\/#!$%\\^&\\*;:{}=\\-_`~()]/g, \" \");\n    index = index.split(/(\\s+)/).filter( function(e) { return e.trim().length > 0; } );\n\n    // check if it is a match\n    let found = {};\n    let hits = index.forEach(function(word) {\n        for (let term of terms) {\n            if (word.startsWith(term)) {\n                found[term] = true\n                return;\n            }\n        }\n    })\n\n    return Object.keys(found).length === terms.length;\n}\n\nlet onSubmit = async function(app, model, event) {\n    event.preventDefault();\n\n    return ff.redirect(app, model, \"/?q=\" + model.query);\n}\n\nlet onQueryChange = async function(app, model, event) {\n    model.query = event.target.value;\n    return () => model;\n}\n\nlet Hit = function({element, mc}) {\n    let badge;\n    if(element.tagName === \"table\") {\n        badge = <Badge variant=\"primary\">Table</Badge>;\n    } else if (element.tagName === \"column\") {\n        badge = <Badge variant=\"secondary\">Column</Badge>;\n    }\n\n    let name = element.getAttribute('name');\n\n    return (\n        <div>{badge} <ff.Link mc={mc} href={\"/reference/#\" + name}>{name}</ff.Link> <small className=\"text-muted\">{element.getAttribute(\"remarks\")}</small></div>\n    )\n}\n\nlet homeView = function(model, mc) {\n    let query = model.query;\n    let hits = model.hits.map(element => <Hit key={elementToKey(element)} element={element} mc={mc} />);\n\n    return (\n        <>\n            <Header/>\n            <Container>\n                <Row>\n                    <Col>\n                        <Form onSubmit={mc(onSubmit)}>\n                            <Form.Group>\n                                <Form.Label>Recherche</Form.Label>\n                                <Form.Control type=\"text\"\n                                              placeholder=\"filtre\"\n                                              value={query}\n                                              onChange={mc(onQueryChange)}\n                                />\n                                <Form.Text className=\"text-muted\">\n                                    Filtrer les tables ou colonnes.\n                                </Form.Text>\n                            </Form.Group>\n\n                            <Button variant=\"primary\" type=\"submit\">\n                                Submit\n                            </Button>\n                        </Form>\n                    </Col>\n                </Row>\n                {hits}\n            </Container>\n        </>\n    );\n}\n\nrouter.append('/', homeInit, homeView)\n\n// reference\n\nlet referenceInit = async function() {\n    let response = await ff.get(\"/schema.xml\");\n    let text = await response.text()\n    let parser = new DOMParser();\n    let schema = parser.parseFromString(text, \"application/xml\");\n\n    let newModel = {schema: schema};\n\n    return (app, model) => newModel;\n}\n\nlet Header = function() {\n    return (\n        <Navbar bg=\"light\" expand=\"lg\">\n            <Navbar.Brand href=\"/\">omop-schema-viz</Navbar.Brand>\n            <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n            <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                    <Nav.Link href=\"/\">Home</Nav.Link>\n                    <Nav.Link href=\"/reference/\">Reference</Nav.Link>\n                    <Nav.Link href=\"/graph/\">Graph</Nav.Link>\n                </Nav>\n            </Navbar.Collapse>\n        </Navbar>\n    )\n}\n\n\nlet maybePkIndex = function(pk, name) {\n    for (let element of pk) {\n        if (element.getAttribute('column') === name) {\n            return element.getAttribute('sequenceNumberInPK');\n        }\n    }\n    return false;\n}\n\n\nlet Column = function({column, pk}) {\n    let name = column.getAttribute('name');\n    let remarks = column.getAttribute('remarks');\n    let maybeIndex = maybePkIndex(pk, name);\n\n    if (maybeIndex) {\n        pk = <Badge variant=\"info\" title=\"sequence number in primary key\">{ maybeIndex }</Badge>\n    } else {\n        pk = \"\";\n    }\n\n    return (\n        <div>\n            <h3 id={name}><Badge variant=\"secondary\">Column</Badge> {pk} {name}</h3>\n            <ReactMarkdown  renderers={{ linkReference: linkReference }}\n                            source={remarks} />\n        </div>\n    );\n}\n\n\nlet IndexColumn = function({column}) {\n    let name = column.getAttribute('name');\n    let ascending;\n\n    if (column.getAttribute('ascending') === \"true\") {\n        ascending = <Badge variant=\"success\">ascending</Badge>;\n    } else {\n        ascending = <Badge variant=\"danger\">descending</Badge>;\n    }\n\n    return <li>{name} {ascending}</li>\n}\n\n\nlet Index = function({index}) {\n    let name = index.getAttribute('name');\n    let unique;\n    if (index.getAttribute('unique') === \"true\") {\n        unique = <Badge variant=\"warning\">unique</Badge>;\n    } else {\n        unique = \"\";\n    }\n\n    let columns = Array.prototype.slice.call(index.querySelectorAll(':scope > column'));\n\n    return (\n        <Card>\n            <Card.Body>\n                <div>\n                    <h4><Badge variant=\"success\">Index</Badge> {unique} {name}</h4>\n                    <ul>\n                        {columns.map(column => <IndexColumn key={elementToKey(column)}\n                                                            column={column} />)}\n                    </ul>\n                </div>\n            </Card.Body>\n        </Card>\n    );\n}\n\n\n\n\nlet Table = function({table}) {\n    let name = table.getAttribute('name');\n    let remarks = table.getAttribute('remarks');\n    let columns = Array.prototype.slice.call(table.querySelectorAll(':scope > column'));\n    let indices = Array.prototype.slice.call(table.querySelectorAll(':scope > index'));\n    let pk = Array.prototype.slice.call(table.querySelectorAll(':scope > primaryKey'));\n\n    return (\n        <Container fluid=\"md\">\n            <Row>\n                <Col>\n                    <Card>\n                        <Card.Body>\n                            <h2 id={name}><Badge variant=\"primary\">Table</Badge> {name}</h2>\n                            <ReactMarkdown renderers={{ linkReference: linkReference }}\n                                           source={remarks} />\n                            {columns.map(column => <Column key={elementToKey(column)}\n                                                           column={column} pk={pk} />)}\n                            {indices.map(index => <Index key={elementToKey(index)} index={index} />)}\n                        </Card.Body>\n                    </Card>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n\n\nlet referenceView = function(model, mc) {\n    let schema = model.schema;\n    let result = schema.evaluate( '//table', schema, null, XPathResult.ANY_TYPE, null);\n    let tables = [];\n    let table;\n\n    while(table = result.iterateNext()) {\n        tables.push(table);\n    }\n\n    return (\n        <>\n            <Header/>\n            {tables.map(table => <Table key={elementToKey(table)}\n                                        table={table}></Table>)}\n        </>\n    )\n}\n\nrouter.append('/reference/', referenceInit, referenceView)\n\nff.createApp(router);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}